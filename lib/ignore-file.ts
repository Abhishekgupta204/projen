import { File } from './file';
import { Construct } from 'constructs';

export class IgnoreFile extends File {
  private readonly excludes = new Array<string>();
  private readonly includes = new Array<string>();

  constructor(scope: Construct, filePath: string) {
    super(scope, filePath);
  }

  public exclude(...patterns: string[]) {
    this.excludes.push(...patterns);
  }

  public include(...patterns: string[]) {
    this.includes.push(...patterns);
  }

  protected get data(): unknown {
    return [
      '# generated by cdkfs - do not modify by hand',
      ...this.excludes,

      // includes must follow includes
      ...this.includes.map(x => `!${x}`),
    ].join('\n');
  }
}